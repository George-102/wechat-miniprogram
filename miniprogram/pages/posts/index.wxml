<view class="posts-page">
  <!-- 自定义导航栏 -->
  <view class="custom-nav" style="height: {{customNavHeight}}px">
    <view class="nav-content" style="height: 44px; padding-top: {{statusBarHeight}}px">
      <text class="nav-title">发现</text>
      <view class="nav-actions">
        <view class="nav-btn" bind:tap="onSearchTap">
          <text class="btn-icon">🔍</text>
        </view>
        <view class="nav-btn" bind:tap="onPublishTap">
          <text class="btn-icon">✏️</text>
        </view>
      </view>
    </view>
  </view>

  <view class="posts-container" style="padding-top: {{customNavHeight}}px">
    <!-- 分类导航 -->
    <view class="categories-nav">
      <scroll-view class="categories-scroll" scroll-x>
        <view class="categories-list">
          <block wx:for="{{categories}}" wx:key="id">
            <view 
              class="category-item {{item.active ? 'active' : ''}}"
              data-category="{{item.id}}"
              bind:tap="onCategoryTap"
            >
              <text class="category-name">{{item.name}}</text>
              <view class="category-indicator"></view>
            </view>
          </block>
        </view>
      </scroll-view>
    </view>

    <!-- 帖子列表 -->
    <view class="posts-list">
      <block wx:for="{{posts}}" wx:key="_id">
        <post-card 
          postData="{{item}}"
          bind:like="onLikePost"
          bind:comment="onCommentPost"
          bind:share="onSharePost"
          bind:avatarTap="onAvatarTap"
        />
      </block>
    </view>

    <!-- 加载状态 -->
    <view class="loading-state" wx:if="{{loading && !refreshing}}">
      <view class="loading-spinner"></view>
      <text class="loading-text">加载中...</text>
    </view>

    <!-- 没有更多 -->
    <view class="no-more" wx:if="{{!hasMore && posts.length > 0}}">
      <text class="no-more-text">已经到底啦～</text>
    </view>

    <!-- 空状态 -->
    <view class="empty-state" wx:if="{{!loading && posts.length === 0}}">
      <text class="empty-icon">📝</text>
      <text class="empty-text">暂无帖子</text>
      <text class="empty-desc">快来发布第一条帖子吧</text>
      <button class="btn btn-primary" bind:tap="onPublishTap">
        发布帖子
      </button>
    </view>
  </view>

  <!-- 浮动发布按钮 -->
  <view class="floating-action-btn" bind:tap="onPublishTap">
    <text class="fab-icon">+</text>
  </view>
</view>